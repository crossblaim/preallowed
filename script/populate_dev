#!/usr/bin/env ./script/runner 

client = Client.create :name => "preallowed.com"
client.save

subject = Subject.create(:name => "admin", :client => client, :email => "dmitry@rootlocusinc.com", :password => "admin")
subject.save

subject.managed_clients << client
    
resource = Resource.create(:name => "^/.*$", :client => client)
resource.save

resource2 = Resource.create(:name => "^/clients$", :client => client)
resource2.save


role = Role.create(:name => "preallowed_admin", :client => client)
role.save

subject.roles << role
resource.roles << role

# populate cleantogether related data

client = Client.create(:name => "cleantogether.com")
client.save

subject.managed_clients << client

Role.create(:name => "user",         :client => client).save
Role.create(:name => "team captain", :client => client).save
Role.create(:name => "admin",        :client => client).save

#Role.create(:name => "rest", :client_id => 1).save

#Subject.create(:name => "rest", :client_id => 1 , :email => "dmitry@rootlocusinc.com").save


# Resource.create(:name => "^/clients/2($|.xml$|/.*$)", :resource_type_id => 1, :scope_id => 1).save
# Resource.create(:name => "^/.*$", :resource_type_id => 1, :scope_id => 2).save

# Resource.find(2).roles << Role.find(5)         
# Subject.find(2).roles << Role.find(5)

# Resource.find(3).roles << Role.find(2)         
# Resource.find(3).roles << Role.find(3)         
# Resource.find(3).roles << Role.find(4)         

